# 常用包



## JSDOM

[jsdom - npm](https://www.npmjs.com/package/jsdom)

定义

- 在 `NodeJS` 中访问 `document`

- 使用 `jsdom` 实现
- 用于在 `NodeJS` 中可以操作 `DOM`

导入

```js
const { JSDOM } = require('jsdom')
```

基本使用

- 使用 `new JSDOM(html字符串)` 来生成网页
- `window` 为 `new JSDOM(html字符串).window`
- 使用 `html.serialize()` 将网页转化为 `HTML` 字符串

---

## Commander

[commander - npm](https://www.npmjs.com/package/commander)

[tj/commander.js: node.js command-line interfaces made easy](https://github.com/tj/commander.js)

定义

- 用于处理命令行参数

基本使用

- `.version()` : 版本号, 对应 `--v` / `-V`
- `.parse()` : 处理参数 默认添加 `--h` / `-h` 的帮助
- `.command()` : 添加指令
- `.alias()` : 添加指令缩写
- `.description()` : 添加指令描述
- `.option()` : 添加指令选项
- `.action()` : 指令执行回调函数
- `.on()` : 监听事件, 执行自定义回调函数

```js
import { program } from 'commander'
program.version('1.0.0').parse(process.argv) // 自动生成--version版本号以及--help使用帮助
```

---

## ora

[ora - npm](https://www.npmjs.com/package/ora)

[sindresorhus/ora: Elegant terminal spinner](https://github.com/sindresorhus/ora)

定义

- `terminal` 加载效果

基本使用

```js
import ora from 'ora';

const spinner = ora('Loading unicorns').start();

setTimeout(() => {
	spinner.color = 'yellow';
	spinner.text = 'Loading rainbows';
}, 1000);
```

---

## Inquirer

[inquirer - npm](https://www.npmjs.com/package/inquirer)

[SBoudrias/Inquirer.js: A collection of common interactive command line user interfaces.](https://github.com/SBoudrias/Inquirer.js)

定义

- `terminal` 用户交互

基本使用

```js
import inquirer from 'inquirer'

inquirer
	.prompt([
  	/* questions */
	])
	.then((answer) => { /* ... */ })
	.catch((error) => { /* ... */ })
```

---

## download-git-repo

[download-git-repo - npm](https://www.npmjs.com/package/download-git-repo)

[Phillip Lanclos / download-git-repo · GitLab](https://gitlab.com/flippidippi/download-git-repo)

定义

- 用于在 `NodeJS` 中下载 `github` / `gitlab` / `bitbucket` 中的仓库

基本使用

- 可以使用 `NodeJS` 中的 `util.promisify` 来将其转换为返回 `Promise` 的 `API`
- 接收参数
  - `repository` : 仓库地址, 格式为 `repoType:owner/repoName#tag` , `tag` 可有可无
  - `destination` : 下载到磁盘上的哪个位置
  - `options` : `download` 的选项: [kevva/download: Download and extract files](https://github.com/kevva/download#options)

```js
import downloadGitRepo from 'download-git-repo'
import { promisify } from 'util'
const asyncDownloadGitRepo = promisify(downloadGitRepo)

const download = async (repoName, tag) => {
  const url = `github:xsjcTony/${ repoName }# ${ tag }`
  const path = process.env.USERPROFILE
  
  try {
    await asyncDownloadGitRepo(url, path)
  } catch (err) {
    console.error(err)
    process.exit(1)
  }
}
```

---

## ncp

[ncp - npm](https://www.npmjs.com/package/ncp)

[AvianFlu/ncp: Asynchronous recursive file copying with Node.js.](https://github.com/AvianFlu/ncp)

定义

- 用于异步复制文件和目录

基本使用

- 可以使用 `util.promisify` 来将其转换为返回 `Promise` 的 `API`
- 接收参数
  - `source`
  - `destination`
  - `options` (可选)

```js
import { promisify } from 'util'
import ncp from 'ncp'
const asyncNcp = promisify(ncp)

const demo = async (source, target) => {
  await asyncNcp(source, target)
}
```

---

## shelljs

[shelljs - npm](https://www.npmjs.com/package/shelljs)

[shelljs/shelljs: Portable Unix shell commands for Node.js](https://github.com/shelljs/shelljs)

定义

- 基于 `NodeJS` 的 `unix shell commands`

基本使用

- 可以使用 `util.promisify` 来将其转换为返回 `Promise` 的 `API`

```js
import shell from 'shelljs'
const shellExecPromise = promisify(shell.exec)

shell.cd('folderName')
await shellExecPromise('npm install', { silent: true })
```

---

## update-notifier

[update-notifier - npm](https://www.npmjs.com/package/update-notifier)

[yeoman/update-notifier: Update notifications for your CLI app](https://github.com/yeoman/update-notifier)

定义

- 为 `terminal` 的应用提供更新提醒

基本使用

```js
const notifier = updateNotifier({
	pkg,
	updateCheckInterval: 0 // 运行时立即检查
});

if (notifier.update) {
	console.log(`Update available: ${notifier.update.latest}`);
}
```

---

## boxen

[boxen - npm](https://www.npmjs.com/package/boxen)

[sindresorhus/boxen: Create boxes in the terminal](https://github.com/sindresorhus/boxen)

定义

- 在 `terminal` 中创建盒子

基本使用

```js
console.log(boxen('123', {
  padding: {
    top: 1,
    right: 5,
    bottom: 1,
    left: 5
  },

  margin: {
    top: 1,
    right: 5,
    bottom: 1,
    left: 5
  },

  textAlignment: 'center',
  borderColor: '#ffc0cb',
  borderStyle: 'round'
}))
```







